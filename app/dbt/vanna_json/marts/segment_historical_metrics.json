{
  "name": "segment_historical_metrics",
  "description": "Aggregates historical campaign performance metrics by customer segment. Provides insights into segment-level performance, targeting effectiveness, and supports segmentation analysis. Used in Customer Segment Performance dashboards and Audience Targeting recommendations.",
  "columns": [
    {
      "name": "Customer_Segment",
      "type": "VARCHAR",
      "description": "The distinct customer segment targeted by campaigns (e.g., Technology, Home, Food). This is the primary dimension for aggregation.",
      "tests": [
        "not_null",
        "unique",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The total number of campaigns associated with this customer segment.",
      "tests": [
        "not_null",
        "dbt_utils.expression_is_true"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate across all campaigns targeting this segment. Expressed as a decimal (e.g., 0.08 represents 8%).",
      "tests": [
        "not_null",
        "dbt_utils.expression_is_true",
        "dbt_utils.expression_is_true"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) for campaigns targeting this segment. Calculated as (Revenue - Cost) / Cost.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average cost to acquire a customer (CAC) through campaigns targeting this segment.",
      "tests": [
        "not_null",
        "dbt_utils.expression_is_true"
      ],
      "tags": []
    },
    {
      "name": "total_clicks",
      "type": "HUGEINT",
      "description": "The total number of clicks generated by campaigns targeting this segment across all historical data.",
      "tests": [
        "not_null",
        "dbt_utils.expression_is_true"
      ],
      "tags": []
    },
    {
      "name": "total_impressions",
      "type": "HUGEINT",
      "description": "The total number of impressions served for campaigns targeting this segment across all historical data.",
      "tests": [
        "not_null",
        "dbt_utils.expression_is_true"
      ],
      "tags": []
    },
    {
      "name": "overall_ctr",
      "type": "FLOAT",
      "description": "The overall Click-Through Rate (CTR) for this segment, calculated as Total Clicks / Total Impressions across all campaigns for the segment. Expressed as a decimal.",
      "tests": [
        "not_null",
        "dbt_utils.expression_is_true",
        "dbt_utils.expression_is_true"
      ],
      "tags": []
    }
  ],
  "tags": []
}