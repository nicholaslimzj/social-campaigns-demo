{
  "name": "segment_company_historical_rankings",
  "description": "Ranks companies within each customer segment based on historical performance metrics (Conversion Rate, ROI, Acquisition Cost, CTR) across all available campaign data.\nThis model identifies top-performing companies for specific segments, calculates relative performance against segment and global averages, and provides context like campaign volume and total companies per segment.\nIt serves dashboards related to segment performance, company-segment affinity, and targeting strategy.\n",
  "columns": [
    {
      "name": "Customer_Segment",
      "type": "VARCHAR",
      "description": "The customer segment being analyzed. Grouping key for ranking and comparison.",
      "tests": [
        "not_null",
        "dbt_utils.unique_combination_of_columns",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The company whose performance is being analyzed within the segment. Grouping key for ranking and comparison.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average conversion rate achieved by this company within this segment across all historical campaigns.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "Average Return on Investment (ROI) generated by this company within this segment across all historical campaigns.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average cost to acquire a customer or achieve a conversion for this company within this segment across all historical campaigns. Lower is generally better.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "overall_ctr",
      "type": "FLOAT",
      "description": "Overall Click-Through Rate (CTR = Clicks / Impressions) for this company within this segment across all historical campaigns.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The total number of campaigns run by this company within this segment included in the historical analysis.",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_positive"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_rank",
      "type": "BIGINT",
      "description": "Rank of the company within the segment based on average conversion rate (1 = highest conversion rate).",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_positive"
      ],
      "tags": []
    },
    {
      "name": "roi_rank",
      "type": "BIGINT",
      "description": "Rank of the company within the segment based on average ROI (1 = highest ROI).",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_positive"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_rank",
      "type": "BIGINT",
      "description": "Rank of the company within the segment based on average acquisition cost (1 = lowest acquisition cost).",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_positive"
      ],
      "tags": []
    },
    {
      "name": "ctr_rank",
      "type": "BIGINT",
      "description": "Rank of the company within the segment based on overall CTR (1 = highest CTR).",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_positive"
      ],
      "tags": []
    },
    {
      "name": "total_companies_per_segment",
      "type": "BIGINT",
      "description": "Total number of unique companies analyzed within this customer segment.",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_positive"
      ],
      "tags": []
    },
    {
      "name": "is_top_conversion_company",
      "type": "BOOLEAN",
      "description": "Boolean flag (TRUE/FALSE) indicating if this company has the highest average conversion rate (rank=1) in the segment.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "is_top_roi_company",
      "type": "BOOLEAN",
      "description": "Boolean flag (TRUE/FALSE) indicating if this company has the highest average ROI (rank=1) in the segment.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "is_top_acquisition_cost_company",
      "type": "BOOLEAN",
      "description": "Boolean flag (TRUE/FALSE) indicating if this company has the lowest average acquisition cost (rank=1) in the segment.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "is_top_ctr_company",
      "type": "BOOLEAN",
      "description": "Boolean flag (TRUE/FALSE) indicating if this company has the highest overall CTR (rank=1) in the segment.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "segment_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average conversion rate across all companies within this specific customer segment, used for comparison.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "segment_avg_roi",
      "type": "DOUBLE",
      "description": "Average ROI across all companies within this specific customer segment, used for comparison.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "segment_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average acquisition cost across all companies within this specific customer segment, used for comparison.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "segment_avg_ctr",
      "type": "DOUBLE",
      "description": "Average overall CTR across all companies within this specific customer segment, used for comparison.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "company_count",
      "type": "BIGINT",
      "description": "The total number of unique companies within this customer segment (calculated alongside segment averages).",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_positive"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_segment_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference between the company's average conversion rate and the segment's average. Positive values indicate better-than-average performance.",
      "tests": [],
      "tags": []
    },
    {
      "name": "roi_vs_segment_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference between the company's average ROI and the segment's average. Positive values indicate better-than-average performance.",
      "tests": [],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_segment_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference showing how much better (positive) or worse (negative) the company's acquisition cost is compared to the segment average (calculated as segment_avg / company_avg - 1). Positive values indicate better-than-average (lower) cost.",
      "tests": [],
      "tags": []
    },
    {
      "name": "ctr_vs_segment_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference between the company's overall CTR and the segment's average. Positive values indicate better-than-average performance.",
      "tests": [],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_global_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference between the company's average conversion rate and the global average across all segments/companies.",
      "tests": [],
      "tags": []
    },
    {
      "name": "roi_vs_global_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference between the company's average ROI and the global average across all segments/companies.",
      "tests": [],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_global_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference showing how much better (positive) or worse (negative) the company's acquisition cost is compared to the global average (calculated as global_avg / company_avg - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "ctr_vs_global_avg",
      "type": "DOUBLE",
      "description": "Relative performance indicator: Percentage difference between the company's overall CTR and the global average across all segments/companies.",
      "tests": [],
      "tags": []
    }
  ],
  "tags": []
}