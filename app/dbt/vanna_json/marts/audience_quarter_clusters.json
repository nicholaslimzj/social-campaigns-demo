{
  "name": "audience_quarter_clusters",
  "description": "Identifies high-performing target audience clusters for the current quarter (last 3 months of data). It analyzes combinations of Company, Target_Audience, Location, Channel, and Goal to find optimal groupings based on performance metrics like ROI, conversion rate, CTR, and acquisition cost. Calculates normalized scores (z-scores), ranks clusters within companies and audiences, assigns performance tiers, and provides actionable recommendations. Used in the Cohort Analysis dashboard.",
  "columns": [
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The company associated with the marketing campaigns.",
      "tests": [
        "not_null",
        "relationships",
        "dbt_utils.unique_combination_of_columns"
      ],
      "tags": []
    },
    {
      "name": "Target_Audience",
      "type": "VARCHAR",
      "description": "The specific audience segment targeted by the campaigns within the cluster.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "Location",
      "type": "VARCHAR",
      "description": "The geographical location associated with the campaigns in the cluster.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "channel",
      "type": "VARCHAR",
      "description": "The marketing channel used for the campaigns in the cluster (e.g., Facebook, Twitter, Instagram).",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "goal",
      "type": "VARCHAR",
      "description": "The primary goal of the campaigns within the cluster (e.g., Increase Sales, Brand Awareness).",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The number of individual campaigns grouped within this specific cluster. Clusters require a minimum of 3 campaigns.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate for the campaigns within this cluster.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) for the campaigns within this cluster.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average cost to acquire a customer for the campaigns within this cluster.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "The average Click-Through Rate (CTR) for the campaigns within this cluster (Clicks / Impressions).",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_spend",
      "type": "DOUBLE",
      "description": "The total marketing spend for all campaigns within this cluster.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_revenue",
      "type": "DOUBLE",
      "description": "The total calculated revenue generated by the campaigns within this cluster (based on spend and ROI).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate across all clusters for the same Company and Target Audience.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_roi",
      "type": "DOUBLE",
      "description": "The average ROI across all clusters for the same Company and Target Audience.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_ctr",
      "type": "DOUBLE",
      "description": "The average CTR across all clusters for the same Company and Target Audience.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average acquisition cost across all clusters for the same Company and Target Audience.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "cluster_count",
      "type": "BIGINT",
      "description": "The total number of distinct clusters identified for the same Company and Target Audience.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_z_score",
      "type": "DOUBLE",
      "description": "The normalized performance score (z-score) for average conversion rate, comparing the cluster's rate to the company average.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_z_score",
      "type": "DOUBLE",
      "description": "The normalized performance score (z-score) for average ROI, comparing the cluster's ROI to the company average.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "ctr_z_score",
      "type": "DOUBLE",
      "description": "The normalized performance score (z-score) for average CTR, comparing the cluster's CTR to the company average.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "cost_efficiency_z_score",
      "type": "DOUBLE",
      "description": "The normalized performance score (z-score) for cost efficiency (inverted average acquisition cost), comparing the cluster's cost to the company average. Higher is better (more efficient).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "composite_performance_score",
      "type": "DOUBLE",
      "description": "A weighted average of the z-scores for conversion rate (35%), ROI (35%), CTR (15%), and cost efficiency (15%), providing an overall cluster performance measure relative to the company average.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within the Company based on average ROI (1 = highest ROI).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within the Company based on average conversion rate (1 = highest conversion rate).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within the Company based on average acquisition cost (1 = lowest acquisition cost).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "audience_roi_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within the Company and Target Audience based on average ROI (1 = highest ROI).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "audience_conversion_rate_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within the Company and Target Audience based on average conversion rate (1 = highest conversion rate).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "roi_percentile",
      "type": "FLOAT",
      "description": "The percentile rank of the cluster within the Company based on ROI rank (e.g., 0.1 means top 10%). Lower values indicate better relative ROI performance.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "is_high_performing_cluster",
      "type": "BOOLEAN",
      "description": "Boolean flag indicating if the cluster ranks in the top 10% based on the composite performance score within its Company.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "performance_tier",
      "type": "VARCHAR",
      "description": "Categorical tier assigned based on the composite performance score ('Exceptional', 'High Performing', 'Average', 'Underperforming', 'Poor').",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "recommended_action",
      "type": "VARCHAR",
      "description": "Suggested action based on the cluster's performance tier (e.g., 'Increase investment', 'Monitor and optimize').",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    }
  ],
  "tags": []
}