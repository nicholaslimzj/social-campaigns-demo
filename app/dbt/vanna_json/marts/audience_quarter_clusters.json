{
  "name": "audience_quarter_clusters",
  "description": "Identifies high-performing target audience clusters for the current quarter (based on the last 3 months of available data). Clusters are defined by the unique combination of Company, Target_Audience, Location, Channel, and Goal. This model calculates key performance metrics (KPIs), normalized scores (z-scores) relative to company averages, ranks clusters within companies and specific audiences, assigns performance tiers, and suggests recommended actions. It filters for clusters with at least 3 campaigns for statistical significance. Designed for use in dashboards, particularly for cohort analysis and identifying high-ROI audience segments.\n",
  "columns": [
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The company associated with the marketing campaign data.",
      "tests": [
        "not_null",
        "dbt_utils.unique_combination_of_columns",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "Target_Audience",
      "type": "VARCHAR",
      "description": "The specific audience segment targeted by the campaigns within the cluster.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "Location",
      "type": "VARCHAR",
      "description": "The geographical location associated with the campaigns in the cluster.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "channel",
      "type": "VARCHAR",
      "description": "The marketing channel used for the campaigns in the cluster (e.g., Facebook, Twitter, Instagram).",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "goal",
      "type": "VARCHAR",
      "description": "The primary goal of the campaigns within the cluster (e.g., Increase Sales, Brand Awareness).",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The number of individual campaigns grouped within this cluster. Minimum value is 3.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate across all campaigns within the cluster for the quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) across all campaigns within the cluster for the quarter.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average cost to acquire a customer or achieve a conversion across campaigns in the cluster for the quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "The average Click-Through Rate (CTR) calculated as (Total Clicks / Total Impressions) for the cluster over the quarter. Can be null if total impressions are zero.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_spend",
      "type": "DOUBLE",
      "description": "The estimated total marketing spend for all campaigns within the cluster during the quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_revenue",
      "type": "DOUBLE",
      "description": "The estimated total revenue generated by all campaigns within the cluster during the quarter, based on ROI.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate for this specific Target_Audience across all its clusters within the same Company.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_roi",
      "type": "DOUBLE",
      "description": "The average ROI for this specific Target_Audience across all its clusters within the same Company.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_ctr",
      "type": "DOUBLE",
      "description": "The average CTR for this specific Target_Audience across all its clusters within the same Company. Can be null if underlying impressions are zero.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_audience_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average acquisition cost for this specific Target_Audience across all its clusters within the same Company.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "cluster_count",
      "type": "BIGINT",
      "description": "The total number of distinct clusters (Location, Channel, Goal combinations) for this specific Company and Target_Audience.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_z_score",
      "type": "DOUBLE",
      "description": "The normalized score (z-score) indicating how many standard deviations the cluster's avg_conversion_rate is from the Company's average conversion rate.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_z_score",
      "type": "DOUBLE",
      "description": "The normalized score (z-score) indicating how many standard deviations the cluster's avg_roi is from the Company's average ROI.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "ctr_z_score",
      "type": "DOUBLE",
      "description": "The normalized score (z-score) indicating how many standard deviations the cluster's avg_ctr is from the Company's average CTR.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "cost_efficiency_z_score",
      "type": "DOUBLE",
      "description": "The normalized score (z-score) for cost efficiency, calculated as the negative z-score of avg_acquisition_cost (lower cost is better, hence higher score).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "composite_performance_score",
      "type": "DOUBLE",
      "description": "A weighted score combining the z-scores of conversion rate (35%), ROI (35%), CTR (15%), and cost efficiency (15%) to represent overall cluster performance relative to the company.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within its Company based on avg_roi (1 = highest ROI).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within its Company based on avg_conversion_rate (1 = highest conversion rate).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within its Company based on avg_acquisition_cost (1 = lowest acquisition cost).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "audience_roi_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within its Company and Target_Audience based on avg_roi (1 = highest ROI within that audience).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "audience_conversion_rate_rank",
      "type": "BIGINT",
      "description": "The rank of this cluster within its Company and Target_Audience based on avg_conversion_rate (1 = highest conversion rate within that audience).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "roi_percentile",
      "type": "FLOAT",
      "description": "The percentile rank of the cluster within the Company based on ROI rank (lower value indicates better rank, e.g., 0.1 means top 10%).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "is_high_performing_cluster",
      "type": "BOOLEAN",
      "description": "Boolean flag indicating if the cluster is in the top 10% based on composite_performance_score within its Company.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "performance_tier",
      "type": "VARCHAR",
      "description": "Categorical tier assigned based on the composite_performance_score ('Exceptional', 'High Performing', 'Average', 'Underperforming', 'Poor').",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "recommended_action",
      "type": "VARCHAR",
      "description": "A suggested action based on the performance_tier (e.g., 'Increase investment', 'Monitor and optimize').",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    }
  ],
  "tags": []
}