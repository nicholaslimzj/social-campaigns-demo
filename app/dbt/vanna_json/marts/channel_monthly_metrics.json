{
  "name": "channel_monthly_metrics",
  "description": "Aggregates campaign performance metrics by company, channel, and month.\nThis mart model provides a time-based view of channel effectiveness within each company,\ncalculating key performance indicators (KPIs), month-over-month changes, spend, revenue,\nand channel share metrics. It follows a hierarchical structure with Company as the primary\ndimension and Channel_Used as the secondary dimension, aggregated monthly.\nUsed for dashboarding channel trends, performance comparisons, and seasonal analysis.\n",
  "columns": [
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "Identifier for the company running the campaigns. Primary dimension for aggregation.",
      "tests": [
        "not_null",
        "dbt_utils.unique_combination_of_columns"
      ],
      "tags": []
    },
    {
      "name": "Channel_Used",
      "type": "VARCHAR",
      "description": "The marketing channel used for the campaigns (e.g., Facebook, Google Ads, Email). Secondary dimension for aggregation.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "month",
      "type": "BIGINT",
      "description": "The calendar month (1-12) for which the metrics are aggregated.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "Total number of distinct campaigns run by the company on this channel during the month.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average conversion rate across all campaigns for the company on this channel during the month.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "Average Return on Investment (ROI) across all campaigns for the company on this channel during the month.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average cost to acquire a customer/conversion across all campaigns for the company on this channel during the month.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "monthly_ctr",
      "type": "FLOAT",
      "description": "Overall Click-Through Rate (Total Clicks / Total Impressions) for the company on this channel during the month.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_clicks",
      "type": "HUGEINT",
      "description": "Total number of clicks generated by campaigns for the company on this channel during the month.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_impressions",
      "type": "HUGEINT",
      "description": "Total number of impressions generated by campaigns for the company on this channel during the month.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_spend",
      "type": "DOUBLE",
      "description": "Estimated total amount spent on campaigns for the company on this channel during the month. Calculated as SUM(Clicks * Conversion_Rate * Acquisition_Cost).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_revenue",
      "type": "DOUBLE",
      "description": "Estimated total revenue generated from campaigns for the company on this channel during the month. Calculated as SUM(Clicks * Conversion_Rate * Acquisition_Cost * (1 + ROI)).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_vs_prev_month",
      "type": "DOUBLE",
      "description": "Percentage change in average ROI compared to the previous month for the same company and channel. NULL if previous month data is unavailable or previous ROI was zero.",
      "tests": [],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_prev_month",
      "type": "DOUBLE",
      "description": "Percentage change in average conversion rate compared to the previous month for the same company and channel. NULL if previous month data is unavailable or previous rate was zero.",
      "tests": [],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_prev_month",
      "type": "DOUBLE",
      "description": "Percentage change in average acquisition cost compared to the previous month for the same company and channel. Positive value indicates improvement (lower cost). NULL if previous month data is unavailable or previous cost was zero.",
      "tests": [],
      "tags": []
    },
    {
      "name": "ctr_vs_prev_month",
      "type": "FLOAT",
      "description": "Percentage change in monthly CTR compared to the previous month for the same company and channel. NULL if previous month data is unavailable or previous CTR was zero.",
      "tests": [],
      "tags": []
    },
    {
      "name": "channel_count",
      "type": "BIGINT",
      "description": "Total number of distinct channels used by the company across all campaigns during this specific month.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "channel_share_clicks",
      "type": "FLOAT",
      "description": "The proportion of the company's total clicks across all channels during the month that came from this specific channel (Clicks_This_Channel / Clicks_Company_Total_Month).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "efficiency_ratio",
      "type": "DOUBLE",
      "description": "Channel efficiency measured as Total Revenue per dollar of Total Spend (Total Revenue / Total Spend) for this channel during the month. NULL if total spend is zero.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    }
  ],
  "tags": []
}