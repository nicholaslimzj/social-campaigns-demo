{
  "name": "channel_quarter_budget_optimizer",
  "description": "Mart model analyzing channel performance for the current quarter (last 3 months of available data) to provide optimal budget allocation recommendations across channels within each company. It calculates key efficiency metrics (ROI, CPA, CTR), models marginal returns (simplified), determines optimal spend shares considering minimum/maximum constraints, projects potential revenue/ROI improvements, and compares optimal vs. current allocation. Designed for use in budget optimization dashboards and strategic planning.",
  "columns": [
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The name of the company being analyzed. Part of the unique key for this model.",
      "tests": [
        "not_null",
        "dbt_utils.unique_combination_of_columns",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "Channel_Used",
      "type": "VARCHAR",
      "description": "The marketing channel used (e.g., Instagram, Facebook, Twitter). Part of the unique key for this model.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "Number of distinct campaigns run by the company on this channel during the analyzed quarter.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "company_count",
      "type": "INTEGER",
      "description": "Helper column indicating count of companies (always 1 at this aggregation level of Company and Channel).",
      "tests": [],
      "tags": []
    },
    {
      "name": "total_spend",
      "type": "DOUBLE",
      "description": "Total spend attributed to this channel for the company during the analyzed quarter. Calculated as SUM(Clicks * Conversion_Rate * Acquisition_Cost).",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "total_revenue",
      "type": "DOUBLE",
      "description": "Total revenue attributed to this channel for the company during the analyzed quarter. Calculated as SUM(Clicks * Conversion_Rate * Acquisition_Cost * (1 + ROI)).",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "Average Return on Investment (ROI) for campaigns on this channel during the analyzed quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average conversion rate for campaigns on this channel during the analyzed quarter.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average cost per acquisition (CPA) for campaigns on this channel during the analyzed quarter.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "Average click-through rate (CTR) calculated as SUM(Clicks) / NULLIF(SUM(Impressions), 0) for this channel/company in the quarter.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "roi_efficiency",
      "type": "DOUBLE",
      "description": "Calculated efficiency metric: Total Revenue / Total Spend for this channel/company in the quarter. Returns 0 if total spend is 0.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "cost_per_click",
      "type": "DOUBLE",
      "description": "Calculated cost per click (CPC) for this channel/company in the quarter: Total Spend / Total Clicks. Returns 0 if total clicks is 0.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "click_through_rate",
      "type": "FLOAT",
      "description": "Calculated overall click-through rate (CTR) for this channel/company in the quarter: Total Clicks / Total Impressions. Returns 0 if total impressions is 0.",
      "tests": [
        "dbt_utils.not_negative",
        "dbt_expectations.expect_column_values_to_be_between"
      ],
      "tags": []
    },
    {
      "name": "current_spend_share",
      "type": "DOUBLE",
      "description": "The proportion of the company's total quarterly spend allocated to this channel currently.",
      "tests": [
        "dbt_utils.not_negative",
        "dbt_expectations.expect_column_values_to_be_between"
      ],
      "tags": []
    },
    {
      "name": "current_revenue_share",
      "type": "DOUBLE",
      "description": "The proportion of the company's total quarterly revenue generated by this channel currently.",
      "tests": [
        "dbt_utils.not_negative",
        "dbt_expectations.expect_column_values_to_be_between"
      ],
      "tags": []
    },
    {
      "name": "efficiency_rank",
      "type": "BIGINT",
      "description": "Rank of the channel within the company based on descending marginal ROI (1 = highest estimated marginal return).",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "optimal_spend_share",
      "type": "DOUBLE",
      "description": "The recommended optimal proportion of the company's total budget to allocate to this channel, based on the simplified optimization model and normalized to sum to 1 across channels for the company.",
      "tests": [
        "dbt_utils.not_negative",
        "dbt_expectations.expect_column_values_to_be_between"
      ],
      "tags": []
    },
    {
      "name": "spend_share_change",
      "type": "DOUBLE",
      "description": "The calculated change between the optimal spend share and the current spend share (Optimal - Current). Indicates the recommended shift in budget allocation percentage.",
      "tests": [],
      "tags": []
    },
    {
      "name": "current_spend",
      "type": "DOUBLE",
      "description": "The absolute current spend on this channel for the company in the quarter (same value as total_spend, included for direct comparison).",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "optimal_spend",
      "type": "DOUBLE",
      "description": "The recommended absolute spend amount for this channel based on the optimal spend share applied to the company's total current spend.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "spend_change",
      "type": "DOUBLE",
      "description": "The calculated absolute change in spend recommended (Optimal Spend - Current Spend).",
      "tests": [],
      "tags": []
    },
    {
      "name": "projected_revenue",
      "type": "DOUBLE",
      "description": "Estimated revenue for this channel if the optimal spend allocation is adopted, based on a simplified projection model incorporating diminishing/increasing returns.",
      "tests": [
        "dbt_utils.not_negative"
      ],
      "tags": []
    },
    {
      "name": "projected_roi",
      "type": "DOUBLE",
      "description": "Estimated ROI for this channel if the optimal spend allocation is adopted, based on a simplified projection model incorporating diminishing/increasing returns.",
      "tests": [],
      "tags": []
    },
    {
      "name": "projected_improvement_pct",
      "type": "DOUBLE",
      "description": "Projected percentage change in revenue compared to current revenue if optimal allocation is adopted ((Projected Revenue - Current Revenue) / Current Revenue). Returns 0 if current revenue is 0.",
      "tests": [],
      "tags": []
    },
    {
      "name": "recommendation_strength",
      "type": "VARCHAR",
      "description": "Categorical assessment of the magnitude of the recommended spend change based on the absolute difference between optimal and current spend share.",
      "tests": [
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "recommendation_direction",
      "type": "VARCHAR",
      "description": "Direction of the recommended spend change (increase, decrease, or maintain).",
      "tests": [
        "accepted_values"
      ],
      "tags": []
    }
  ],
  "tags": []
}