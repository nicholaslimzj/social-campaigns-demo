{
  "name": "campaign_duration_quarter_analysis",
  "description": "Analyzes campaign performance metrics based on campaign duration, aggregated over the most recent quarter (last 3 months of data).\nIt buckets campaigns by duration ranges and calculates average performance (ROI, Conversion Rate, CTR, Acquisition Cost) for each bucket across different dimensions: overall company, campaign goal, and channel used.\nThe model identifies the optimal duration bucket (based on highest average ROI) for each dimension/category combination.\nIt also provides detailed performance data per duration bucket (for heatmaps) and per exact duration day (for scatter plots), including ROI impact calculations relative to averages.\nThis model supports dashboards visualizing campaign duration impact and providing optimization recommendations.\n",
  "columns": [
    {
      "name": "analysis_type",
      "type": "VARCHAR",
      "description": "Categorizes the type of analysis represented by the row: 'optimal_durations' (summary of best performing duration), 'company_duration_heatmap', 'goal_duration_heatmap', 'channel_duration_heatmap' (performance per duration bucket for heatmap viz), or 'exact_duration_performance' (performance per specific day duration for scatter plots).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The name of the company associated with the campaign data.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "dimension",
      "type": "VARCHAR",
      "description": "The dimension used for grouping the analysis ('Company', 'Goal', 'Channel'). NULL for 'exact_duration_performance' analysis type.",
      "tests": [
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "category",
      "type": "VARCHAR",
      "description": "The specific value within the dimension (e.g., the company name if dimension='Company', the goal name if dimension='Goal', the channel name if dimension='Channel'). NULL for 'exact_duration_performance' analysis type.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "optimal_duration_bucket",
      "type": "VARCHAR",
      "description": "The calculated optimal duration range (e.g., '15-21 days') based on the highest average ROI for the given Company/Dimension/Category. Populated only when analysis_type = 'optimal_durations'.",
      "tests": [
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "optimal_min_duration",
      "type": "BIGINT",
      "description": "The minimum campaign duration (in days) included in the specific duration bucket or optimal bucket. Populated for 'optimal_durations' and heatmap analysis types.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_max_duration",
      "type": "BIGINT",
      "description": "The maximum campaign duration (in days) included in the specific duration bucket or optimal bucket. Populated for 'optimal_durations' and heatmap analysis types.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) associated with the optimal_duration_bucket. Populated only when analysis_type = 'optimal_durations'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_conversion_rate",
      "type": "DOUBLE",
      "description": "The average Conversion Rate associated with the optimal_duration_bucket. Populated only when analysis_type = 'optimal_durations'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_roi_per_day",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) per day, calculated for the optimal_duration_bucket to normalize ROI across different durations. Populated only when analysis_type = 'optimal_durations'.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "optimal_duration_range",
      "type": "VARCHAR",
      "description": "A formatted string representing the optimal duration range (e.g., '45-45 days' or '15-21 days'). Populated only when analysis_type = 'optimal_durations'.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "Duration",
      "type": "BIGINT",
      "description": "The exact campaign duration in days. Populated only when analysis_type = 'exact_duration_performance'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The number of campaigns aggregated within the specific group (duration bucket/dimension/category or exact duration). Populated for heatmap and exact duration analysis types.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average Conversion Rate for the campaigns within the specific group. Populated for heatmap and exact duration analysis types.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) for the campaigns within the specific group. Populated for heatmap and exact duration analysis types.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average Acquisition Cost for the campaigns within the specific group. Populated for heatmap and exact duration analysis types.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "The average Click-Through Rate (CTR) for the campaigns within the specific group. Populated for heatmap and exact duration analysis types.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi_per_day",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) per day for the campaigns within the specific group, used to normalize ROI across different durations. Populated for heatmap and exact duration analysis types.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_impact",
      "type": "DOUBLE",
      "description": "The absolute difference between the average ROI of the duration bucket and the overall average ROI for its specific dimension/category (e.g., avg ROI for '15-21 days' bucket minus avg ROI for 'Goal=Brand Awareness'). Populated for heatmap analysis types.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_impact_pct",
      "type": "DOUBLE",
      "description": "The percentage difference between the average ROI of the duration bucket and the overall average ROI for its specific dimension/category. Populated for heatmap analysis types.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "duration_bucket_num",
      "type": "INTEGER",
      "description": "A numerical representation of the duration bucket (1: '1-7 days', 2: '8-14 days', ..., 7: '60+ days'). Populated for heatmap analysis types.",
      "tests": [
        "accepted_values"
      ],
      "tags": []
    }
  ],
  "tags": []
}