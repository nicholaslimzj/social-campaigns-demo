{
  "name": "campaign_duration_quarter_analysis",
  "description": "Analyzes the relationship between campaign duration and performance metrics (ROI, Conversion Rate, CTR, etc.) for the most recent quarter (last 3 months of data).\nIt identifies optimal campaign duration buckets based on average ROI across different dimensions: overall company, company-goal, and company-channel.\nThe model also provides aggregated performance metrics for exact campaign durations.\nThis analysis helps in understanding optimal campaign lengths for planning and optimization.\nData is filtered to include only duration buckets or exact durations with at least 2 campaigns.\nOutput includes two types of analysis identified by the 'analysis_type' column: 'optimal_durations' and 'exact_duration_performance'.\n",
  "columns": [
    {
      "name": "analysis_type",
      "type": "VARCHAR",
      "description": "Indicates the type of analysis presented in the row: 'optimal_durations' (summary of best performing duration bucket) or 'exact_duration_performance' (performance metrics for a specific campaign duration in days).",
      "tests": [
        "dbt_utils.unique_combination_of_columns"
      ],
      "tags": []
    },
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The name of the company for which the campaign analysis is performed.",
      "tests": [
        "not_null",
        "relationships"
      ],
      "tags": []
    },
    {
      "name": "dimension",
      "type": "VARCHAR",
      "description": "The dimension used for identifying the optimal duration ('Company', 'Goal', 'Channel'). Populated only when analysis_type is 'optimal_durations'.",
      "tests": [
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "category",
      "type": "VARCHAR",
      "description": "The specific category within the dimension (e.g., company name, goal name, channel name). Populated only when analysis_type is 'optimal_durations'.",
      "tests": [],
      "tags": []
    },
    {
      "name": "optimal_duration_bucket",
      "type": "VARCHAR",
      "description": "The text representation of the campaign duration bucket (e.g., '22-30 days') identified as having the highest average ROI for the given company/dimension/category. Populated only when analysis_type is 'optimal_durations'.",
      "tests": [
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "optimal_min_duration",
      "type": "BIGINT",
      "description": "The minimum campaign duration (in days) included in the optimal duration bucket. Populated only when analysis_type is 'optimal_durations'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_max_duration",
      "type": "BIGINT",
      "description": "The maximum campaign duration (in days) included in the optimal duration bucket. Populated only when analysis_type is 'optimal_durations'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) achieved within the optimal duration bucket for the given company/dimension/category. Populated only when analysis_type is 'optimal_durations'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate achieved within the optimal duration bucket for the given company/dimension/category. Populated only when analysis_type is 'optimal_durations'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_roi_per_day",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) per day, calculated within the optimal duration bucket to normalize for duration length. Populated only when analysis_type is 'optimal_durations'.",
      "tests": [],
      "tags": []
    },
    {
      "name": "optimal_duration_range",
      "type": "VARCHAR",
      "description": "A formatted string representing the optimal duration range (e.g., '30-30 days', '31-45 days'). Derived from optimal_min_duration and optimal_max_duration. Populated only when analysis_type is 'optimal_durations'.",
      "tests": [],
      "tags": []
    },
    {
      "name": "Duration",
      "type": "BIGINT",
      "description": "The exact duration of campaigns in days. Populated only when analysis_type is 'exact_duration_performance'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The number of campaigns aggregated for this specific duration (when analysis_type is 'exact_duration_performance'). Based on HAVING clause, this should be >= 2.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate for campaigns with the specified exact 'Duration'. Populated only when analysis_type is 'exact_duration_performance'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) for campaigns with the specified exact 'Duration'. Populated only when analysis_type is 'exact_duration_performance'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average acquisition cost for campaigns with the specified exact 'Duration'. Populated only when analysis_type is 'exact_duration_performance'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "The average Click-Through Rate (CTR) for campaigns with the specified exact 'Duration'. Populated only when analysis_type is 'exact_duration_performance'.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi_per_day",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) per day for campaigns with the specified exact 'Duration'. Populated only when analysis_type is 'exact_duration_performance'.",
      "tests": [],
      "tags": []
    }
  ],
  "tags": []
}