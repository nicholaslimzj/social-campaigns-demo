{
  "name": "dimensions_quarter_performance_rankings",
  "description": "Ranks entities (companies, channels, segments, target audiences) within their respective dimensions based on key performance metrics (Conversion Rate, ROI, Acquisition Cost, CTR) for the most recent quarter.\nCalculates quarter-over-quarter (QoQ) changes and identifies performance trends compared to the previous quarter.\nProvides context by showing the rank relative to the total number of entities in the dimension.\nDesigned for performance analysis dashboards, focusing on relative rankings and QoQ trends.\nThe 'current quarter' is defined as the last 3 months of available data, and the 'previous quarter' is the 3 months preceding that.\n",
  "columns": [
    {
      "name": "dimension",
      "type": "VARCHAR",
      "description": "The category being analyzed (e.g., 'company', 'channel', 'segment', 'audience').",
      "tests": [
        "not_null",
        "accepted_values",
        "dbt_utils.unique_combination_of_columns"
      ],
      "tags": []
    },
    {
      "name": "entity",
      "type": "VARCHAR",
      "description": "The specific item within the dimension being ranked (e.g., a specific company name, channel name, segment name, or target audience).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "metric",
      "type": "VARCHAR",
      "description": "The performance indicator being measured and ranked (e.g., 'conversion_rate', 'roi', 'acquisition_cost', 'ctr').",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "metric_value",
      "type": "DOUBLE",
      "description": "The calculated value of the specified metric for the entity in the current quarter.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "metric_rank",
      "type": "BIGINT",
      "description": "The rank of the entity within its dimension for the specified metric in the current quarter (1 = best performance). Lower rank is better for acquisition_cost, higher is better for others.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_entities",
      "type": "BIGINT",
      "description": "The total number of unique entities within the dimension for the current quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The number of campaigns associated with this entity in the current quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "prev_metric_value",
      "type": "DOUBLE",
      "description": "The calculated value of the specified metric for the entity in the previous quarter. NULL if no data exists for the previous quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "metric_qoq_change",
      "type": "DOUBLE",
      "description": "The percentage change in the metric value from the previous quarter to the current quarter ((current - previous) / previous). NULL if previous data is missing or zero. Note: For Acquisition Cost, a positive change means cost increased (worse), negative means cost decreased (better).",
      "tests": [],
      "tags": []
    },
    {
      "name": "trend",
      "type": "VARCHAR",
      "description": "Categorical assessment of the performance change based on QoQ change ('improved', 'declined', 'unchanged', 'no_previous_data'). 'Improved' means better performance (higher ROI/CTR/Conversion Rate, lower Acquisition Cost).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "current_window_start_month",
      "type": "BIGINT",
      "description": "The starting month number (1-12) of the current analysis period (last 3 months).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "current_window_end_month",
      "type": "BIGINT",
      "description": "The ending month number (1-12) of the current analysis period (last 3 months).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "previous_window_start_month",
      "type": "BIGINT",
      "description": "The starting month number (1-12) of the previous analysis period (3 months prior to current).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "previous_window_end_month",
      "type": "BIGINT",
      "description": "The ending month number (1-12) of the previous analysis period (3 months prior to current).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    }
  ],
  "tags": []
}