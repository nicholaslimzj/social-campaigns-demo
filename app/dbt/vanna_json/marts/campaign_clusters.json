{
  "name": "campaign_clusters",
  "description": "Identifies high-performing marketing campaign combinations based on Goal, Segment, Channel, and Duration.\nThis model groups campaigns, calculates performance metrics (ROI, Conversion Rate, Acquisition Cost, CTR) for each combination,\nranks them within each company, compares them to company and global averages, determines optimal duration ranges,\nand flags the top combinations as 'winning'. It simulates a clustering analysis using SQL aggregations and rankings.\nOnly combinations with at least 3 campaigns are considered for statistical significance.\n",
  "columns": [
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The company associated with the campaign combination.",
      "tests": [
        "not_null",
        "dbt_utils.unique_combination_of_columns"
      ],
      "tags": []
    },
    {
      "name": "goal",
      "type": "VARCHAR",
      "description": "The primary goal of the campaigns in this combination (e.g., Increase Sales, Brand Awareness).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "segment",
      "type": "VARCHAR",
      "description": "The target customer segment for the campaigns in this combination (e.g., Fashion, Tech Enthusiasts).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "channel",
      "type": "VARCHAR",
      "description": "The marketing channel used for the campaigns in this combination (e.g., Facebook, Google Ads, Email).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "duration_bucket",
      "type": "VARCHAR",
      "description": "The calculated duration range category for the campaigns in this combination (e.g., '1-7 days', '8-14 days').",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate achieved by campaigns within this specific combination.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) for campaigns within this specific combination.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average cost to acquire a customer (Acquisition Cost) for campaigns within this specific combination.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "The average Click-Through Rate (CTR) for campaigns within this specific combination (Clicks / Impressions).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The number of individual campaigns grouped into this specific combination. Used to ensure statistical significance (minimum 3).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "min_duration",
      "type": "BIGINT",
      "description": "The minimum duration (in days) among campaigns within this combination.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "max_duration",
      "type": "BIGINT",
      "description": "The maximum duration (in days) among campaigns within this combination.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_duration",
      "type": "DOUBLE",
      "description": "The average duration (in days) of campaigns within this combination.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_company",
      "type": "DOUBLE",
      "description": "Ratio comparing this combination's average conversion rate to the company's overall average conversion rate across all combinations.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_vs_company",
      "type": "DOUBLE",
      "description": "Ratio comparing this combination's average ROI to the company's overall average ROI across all combinations.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_company",
      "type": "DOUBLE",
      "description": "Ratio comparing the company's overall average acquisition cost to this combination's average acquisition cost (inverted for intuitive comparison - higher is better).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "ctr_vs_company",
      "type": "DOUBLE",
      "description": "Ratio comparing this combination's average CTR to the company's overall average CTR across all combinations.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_global",
      "type": "DOUBLE",
      "description": "Ratio comparing this combination's average conversion rate to the global average conversion rate across all companies and combinations.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "roi_vs_global",
      "type": "DOUBLE",
      "description": "Ratio comparing this combination's average ROI to the global average ROI across all companies and combinations.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_global",
      "type": "DOUBLE",
      "description": "Ratio comparing the global average acquisition cost to this combination's average acquisition cost (inverted for intuitive comparison - higher is better).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "ctr_vs_global",
      "type": "DOUBLE",
      "description": "Ratio comparing this combination's average CTR to the global average CTR across all companies and combinations.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_rank",
      "type": "BIGINT",
      "description": "The rank of this combination within its company based on average conversion rate (1 = highest).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "roi_rank",
      "type": "BIGINT",
      "description": "The rank of this combination within its company based on average ROI (1 = highest).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_rank",
      "type": "BIGINT",
      "description": "The rank of this combination within its company based on average acquisition cost (1 = lowest).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "ctr_rank",
      "type": "BIGINT",
      "description": "The rank of this combination within its company based on average CTR (1 = highest).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "composite_rank",
      "type": "BIGINT",
      "description": "The overall rank of this combination within its company based on a weighted composite score of individual metric ranks (1 = best overall).",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "composite_score",
      "type": "DECIMAL(24,1)",
      "description": "A weighted score calculated from individual metric ranks (ROI, Conversion Rate, Acquisition Cost, CTR). Lower score indicates better overall performance.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_duration_bucket",
      "type": "VARCHAR",
      "description": "The duration bucket identified as having the highest average ROI for this specific Company-Goal-Segment-Channel combination (regardless of the current row's duration bucket).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "optimal_min_duration",
      "type": "BIGINT",
      "description": "The minimum campaign duration observed within the optimal duration bucket for this Company-Goal-Segment-Channel combination.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "optimal_max_duration",
      "type": "BIGINT",
      "description": "The maximum campaign duration observed within the optimal duration bucket for this Company-Goal-Segment-Channel combination.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "is_winning_combination",
      "type": "BOOLEAN",
      "description": "Boolean flag indicating if this combination ranks within the top 10% based on the composite score for its company (TRUE = Winning).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "is_optimal_duration",
      "type": "BOOLEAN",
      "description": "Boolean flag indicating if this specific combination's duration bucket matches the identified optimal duration bucket for its Company-Goal-Segment-Channel (TRUE = Uses Optimal Duration).",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "optimal_duration_range",
      "type": "VARCHAR",
      "description": "A formatted string representing the optimal duration range (e.g., '15-21 days') based on the min/max durations found in the optimal bucket.",
      "tests": [
        "not_null"
      ],
      "tags": []
    }
  ],
  "tags": []
}