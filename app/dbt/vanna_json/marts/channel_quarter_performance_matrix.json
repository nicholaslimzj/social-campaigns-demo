{
  "name": "channel_quarter_performance_matrix",
  "description": "Analyzes marketing channel performance for the current quarter (last 3 months of available data).  Aggregates metrics at the channel, company, target audience, and campaign goal level.  Provides absolute performance metrics (conversion rate, ROI, acquisition cost, CTR),  relative performance comparisons against channel, company, dimension, and global averages,  and calculates a weighted composite score for ranking performance combinations.  Designed for dashboarding channel effectiveness and identifying high/low performers.\n",
  "columns": [
    {
      "name": "Channel_Used",
      "type": "VARCHAR",
      "description": "The marketing channel used for the campaign (e.g., Facebook, Google Ads, Email).",
      "tests": [
        "not_null",
        "dbt_utils.unique_combination_of_columns",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The company associated with the campaign.",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "dimension_value",
      "type": "VARCHAR",
      "description": "The specific value of the dimension being analyzed (e.g., 'Brand Awareness' if dimension_type is 'goal', or 'All Ages' if dimension_type is 'target_audience').",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "dimension_type",
      "type": "VARCHAR",
      "description": "The type of dimension being analyzed ('goal' or 'target_audience').",
      "tests": [
        "not_null",
        "accepted_values",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The number of distinct campaigns included in this specific combination (Channel, Company, Dimension) for the quarter.",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_non_negative",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate for this combination over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_between",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "The average Return on Investment (ROI) for this combination over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average cost to acquire a customer/conversion for this combination over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_non_negative",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "The average Click-Through Rate (CTR) for this combination over the quarter (Total Clicks / Total Impressions).",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_between",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "total_clicks",
      "type": "HUGEINT",
      "description": "The total number of clicks generated by campaigns in this combination over the quarter.",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_non_negative",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "total_impressions",
      "type": "HUGEINT",
      "description": "The total number of impressions generated by campaigns in this combination over the quarter.",
      "tests": [
        "not_null",
        "dbt_expectations.expect_column_values_to_be_non_negative",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "total_spend",
      "type": "DOUBLE",
      "description": "The estimated total spend for this combination over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_non_negative",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "total_revenue",
      "type": "DOUBLE",
      "description": "The estimated total revenue generated from this combination over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "channel_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate across all companies and dimensions for this specific channel over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "channel_avg_roi",
      "type": "DOUBLE",
      "description": "The average ROI across all companies and dimensions for this specific channel over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "channel_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average acquisition cost across all companies and dimensions for this specific channel over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "channel_avg_ctr",
      "type": "DOUBLE",
      "description": "The average CTR across all companies and dimensions for this specific channel over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "channel_total_spend",
      "type": "DOUBLE",
      "description": "The total spend across all companies and dimensions for this specific channel over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "channel_total_revenue",
      "type": "DOUBLE",
      "description": "The total revenue across all companies and dimensions for this specific channel over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "company_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate across all dimensions for this specific channel and company over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "company_avg_roi",
      "type": "DOUBLE",
      "description": "The average ROI across all dimensions for this specific channel and company over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "company_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average acquisition cost across all dimensions for this specific channel and company over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "company_avg_ctr",
      "type": "DOUBLE",
      "description": "The average CTR across all dimensions for this specific channel and company over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "company_total_spend",
      "type": "DOUBLE",
      "description": "The total spend across all dimensions for this specific channel and company over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "company_total_revenue",
      "type": "DOUBLE",
      "description": "The total revenue across all dimensions for this specific channel and company over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "dimension_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The average conversion rate across all companies for this specific channel and dimension over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "dimension_avg_roi",
      "type": "DOUBLE",
      "description": "The average ROI across all companies for this specific channel and dimension over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "dimension_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The average acquisition cost across all companies for this specific channel and dimension over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "dimension_avg_ctr",
      "type": "DOUBLE",
      "description": "The average CTR across all companies for this specific channel and dimension over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "global_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "The global average conversion rate across all channels, companies, and dimensions over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "global_avg_roi",
      "type": "DOUBLE",
      "description": "The global average ROI across all channels, companies, and dimensions over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "global_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "The global average acquisition cost across all channels, companies, and dimensions over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "global_avg_ctr",
      "type": "DOUBLE",
      "description": "The global average CTR across all channels, companies, and dimensions over the quarter.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's conversion rate compared to the channel average ((Combo CR / Channel CR) - 1).",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "roi_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's ROI compared to the channel average ((Combo ROI / Channel ROI) - 1).",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's acquisition cost compared to the channel average ((Channel AC / Combo AC) - 1). Higher is better (lower cost).",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "ctr_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's CTR compared to the channel average ((Combo CTR / Channel CTR) - 1).",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's conversion rate compared to the company's average within this channel.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "roi_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's ROI compared to the company's average within this channel.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's acquisition cost compared to the company's average within this channel. Higher is better.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "ctr_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's CTR compared to the company's average within this channel.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's conversion rate compared to the dimension's average within this channel.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "roi_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's ROI compared to the dimension's average within this channel.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's acquisition cost compared to the dimension's average within this channel. Higher is better.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "ctr_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's CTR compared to the dimension's average within this channel.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's conversion rate compared to the global average.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "roi_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's ROI compared to the global average.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's acquisition cost compared to the global average. Higher is better.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "ctr_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference of this combination's CTR compared to the global average.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "spend_pct_of_channel",
      "type": "DOUBLE",
      "description": "The percentage of the channel's total spend allocated to this specific combination (Combo Spend / Channel Spend).",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_between",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "revenue_pct_of_channel",
      "type": "DOUBLE",
      "description": "The percentage of the channel's total revenue contributed by this specific combination (Combo Revenue / Channel Revenue).",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_between",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "composite_score",
      "type": "DOUBLE",
      "description": "A weighted score reflecting overall performance relative to global averages (Weights: ROI 40%, Conversion Rate 25%, Acquisition Cost 25%, CTR 10%). Higher is better.",
      "tests": [
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "performance_tier",
      "type": "VARCHAR",
      "description": "Categorization based on composite score ('high_performer' >= 1.2, 'low_performer' <= 0.8, 'average_performer' otherwise).",
      "tests": [
        "not_null",
        "accepted_values",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    },
    {
      "name": "is_top_performer",
      "type": "BOOLEAN",
      "description": "Boolean flag indicating if this combination ranks in the top 10% based on composite score within its dimension type.",
      "tests": [
        "not_null",
        "accepted_values",
        "dbt_expectations.expect_column_values_to_be_of_type"
      ],
      "tags": []
    }
  ],
  "tags": []
}