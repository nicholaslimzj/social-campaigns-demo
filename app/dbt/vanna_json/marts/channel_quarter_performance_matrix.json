{
  "name": "channel_quarter_performance_matrix",
  "description": "Analyzes marketing channel performance metrics for the current quarter (last 3 months of available data).\nAggregates key performance indicators (KPIs) at the level of Channel, Company, and a specific dimension (Target Audience or Campaign Goal).\nCalculates performance relative to channel, company, dimension, and global averages.\nIncludes a weighted composite score for ranking and performance tier classification.\nDesigned for use in dashboards visualizing channel mix, ROI, acquisition cost, and performance comparisons.\n",
  "columns": [
    {
      "name": "Channel_Used",
      "type": "VARCHAR",
      "description": "The marketing channel used for the campaigns (e.g., Facebook, Google Ads, Email).",
      "tests": [
        "not_null",
        "dbt_utils.unique_combination_of_columns"
      ],
      "tags": []
    },
    {
      "name": "Company",
      "type": "VARCHAR",
      "description": "The company associated with the marketing campaigns.",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "dimension_value",
      "type": "VARCHAR",
      "description": "The specific value of the dimension being analyzed (e.g., 'Brand Awareness' if dimension_type is 'goal', or 'All Ages' if dimension_type is 'target_audience').",
      "tests": [
        "not_null"
      ],
      "tags": []
    },
    {
      "name": "dimension_type",
      "type": "VARCHAR",
      "description": "The type of dimension being analyzed in this row ('goal' or 'target_audience').",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "campaign_count",
      "type": "BIGINT",
      "description": "The total number of campaigns included in this specific Channel-Company-Dimension combination for the current quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average Conversion Rate for this specific Channel-Company-Dimension combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_roi",
      "type": "DOUBLE",
      "description": "Average Return on Investment (ROI) for this specific Channel-Company-Dimension combination during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average Acquisition Cost for this specific Channel-Company-Dimension combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "avg_ctr",
      "type": "FLOAT",
      "description": "Average Click-Through Rate (CTR) for this specific Channel-Company-Dimension combination during the current quarter. Calculated as Total Clicks / Total Impressions.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_clicks",
      "type": "HUGEINT",
      "description": "Total number of clicks generated by campaigns in this combination during the current quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_impressions",
      "type": "HUGEINT",
      "description": "Total number of impressions generated by campaigns in this combination during the current quarter.",
      "tests": [
        "not_null",
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_spend",
      "type": "DOUBLE",
      "description": "Total calculated marketing spend for this combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "total_revenue",
      "type": "DOUBLE",
      "description": "Total calculated revenue generated from this combination during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "channel_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average Conversion Rate across all companies and dimensions for this specific Channel during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "channel_avg_roi",
      "type": "DOUBLE",
      "description": "Average ROI across all companies and dimensions for this specific Channel during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "channel_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average Acquisition Cost across all companies and dimensions for this specific Channel during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "channel_avg_ctr",
      "type": "DOUBLE",
      "description": "Average CTR across all companies and dimensions for this specific Channel during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "channel_total_spend",
      "type": "DOUBLE",
      "description": "Total marketing spend across all companies and dimensions for this specific Channel during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "channel_total_revenue",
      "type": "DOUBLE",
      "description": "Total revenue generated across all companies and dimensions for this specific Channel during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "company_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average Conversion Rate across all dimensions for this specific Channel-Company combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "company_avg_roi",
      "type": "DOUBLE",
      "description": "Average ROI across all dimensions for this specific Channel-Company combination during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "company_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average Acquisition Cost across all dimensions for this specific Channel-Company combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "company_avg_ctr",
      "type": "DOUBLE",
      "description": "Average CTR across all dimensions for this specific Channel-Company combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "company_total_spend",
      "type": "DOUBLE",
      "description": "Total marketing spend across all dimensions for this specific Channel-Company combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "company_total_revenue",
      "type": "DOUBLE",
      "description": "Total revenue generated across all dimensions for this specific Channel-Company combination during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "dimension_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Average Conversion Rate across all companies for this specific Channel-Dimension combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "dimension_avg_roi",
      "type": "DOUBLE",
      "description": "Average ROI across all companies for this specific Channel-Dimension combination during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "dimension_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Average Acquisition Cost across all companies for this specific Channel-Dimension combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "dimension_avg_ctr",
      "type": "DOUBLE",
      "description": "Average CTR across all companies for this specific Channel-Dimension combination during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "global_avg_conversion_rate",
      "type": "DOUBLE",
      "description": "Global average Conversion Rate across all channels, companies, and dimensions during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "global_avg_roi",
      "type": "DOUBLE",
      "description": "Global average ROI across all channels, companies, and dimensions during the current quarter.",
      "tests": [],
      "tags": []
    },
    {
      "name": "global_avg_acquisition_cost",
      "type": "DOUBLE",
      "description": "Global average Acquisition Cost across all channels, companies, and dimensions during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "global_avg_ctr",
      "type": "DOUBLE",
      "description": "Global average CTR across all channels, companies, and dimensions during the current quarter.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average Conversion Rate and the overall average Conversion Rate for the channel. ((Combination Avg / Channel Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "roi_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average ROI and the overall average ROI for the channel. ((Combination Avg / Channel Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between the channel's average Acquisition Cost and this combination's average Acquisition Cost (inverted for comparison: higher is better). ((Channel Avg / Combination Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "ctr_vs_channel_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average CTR and the overall average CTR for the channel. ((Combination Avg / Channel Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average Conversion Rate and the average for this specific Channel-Company combination. ((Combination Avg / Company Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "roi_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average ROI and the average for this specific Channel-Company combination. ((Combination Avg / Company Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between the Channel-Company average Acquisition Cost and this combination's average Acquisition Cost (inverted). ((Company Avg / Combination Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "ctr_vs_company_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average CTR and the average for this specific Channel-Company combination. ((Combination Avg / Company Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average Conversion Rate and the average for this specific Channel-Dimension combination. ((Combination Avg / Dimension Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "roi_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average ROI and the average for this specific Channel-Dimension combination. ((Combination Avg / Dimension Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between the Channel-Dimension average Acquisition Cost and this combination's average Acquisition Cost (inverted). ((Dimension Avg / Combination Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "ctr_vs_dimension_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average CTR and the average for this specific Channel-Dimension combination. ((Combination Avg / Dimension Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "conversion_rate_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average Conversion Rate and the global average. ((Combination Avg / Global Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "roi_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average ROI and the global average. ((Combination Avg / Global Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "acquisition_cost_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between the global average Acquisition Cost and this combination's average Acquisition Cost (inverted). ((Global Avg / Combination Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "ctr_vs_global_avg",
      "type": "DOUBLE",
      "description": "Percentage difference between this combination's average CTR and the global average. ((Combination Avg / Global Avg) - 1).",
      "tests": [],
      "tags": []
    },
    {
      "name": "spend_pct_of_channel",
      "type": "DOUBLE",
      "description": "The percentage of the channel's total spend attributed to this specific combination (Combination Total Spend / Channel Total Spend).",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "revenue_pct_of_channel",
      "type": "DOUBLE",
      "description": "The percentage of the channel's total revenue attributed to this specific combination (Combination Total Revenue / Channel Total Revenue).",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "composite_score",
      "type": "DOUBLE",
      "description": "A weighted score indicating overall performance relative to global averages. Weights: ROI (0.4), Conversion Rate (0.25), Acquisition Cost (0.25, inverted), CTR (0.1). Higher is better.",
      "tests": [
        "dbt_utils.accepted_range"
      ],
      "tags": []
    },
    {
      "name": "performance_tier",
      "type": "VARCHAR",
      "description": "Categorical performance classification based on the composite_score ('high_performer' >= 1.2, 'low_performer' <= 0.8, 'average_performer' otherwise).",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    },
    {
      "name": "is_top_performer",
      "type": "BOOLEAN",
      "description": "Boolean flag indicating if this combination ranks in the top 10% based on composite_score within its dimension_type.",
      "tests": [
        "not_null",
        "accepted_values"
      ],
      "tags": []
    }
  ],
  "tags": []
}